# Description:Expanding tokenlist
# Exit code:0
# Stdout:
# Stderr:

import lib.std
import lib.tokens


def main: int argc, ptr argv -> int
    1 create_tokenlist tokenlist setp
    tokenlist derefp tokenlist.max_tokens + derefi 1 = "Tokenlist should have limit 1" assert
    tokenlist derefp tokenlist.num_tokens + derefi 0 = "Tokenlist should have 0 tokens" assert

    TOKEN_NOOP 0 0 create_token
    tokenlist derefp tokenlist.num_tokens + derefi 1 = "Tokenlist should have 1 token" assert

    TOKEN_NOOP 0 0 create_token
    TOKEN_NOOP 0 0 create_token
    tokenlist derefp tokenlist.max_tokens + derefi 4 = "Tokenlist should have limit 4" assert
    tokenlist derefp tokenlist.num_tokens + derefi 3 = "Tokenlist should have 3 tokens" assert
    0
