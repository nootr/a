# Description:Standard library - list
# Exit code:1
# Stdout:
# Stderr:Error: Can't peek in an empty list

import lib.std

def main: ptr argv, int argc -> int
    new_list
    dup 1 swap list_append
    dup 3 swap list_append
    dup 3 swap list_append
    dup 7 swap list_append

    dup 3 swap list_fetch 7 = "Fourth element should be 7" assert
    dup 2 swap list_fetch 3 = "Third element should be 3" assert
    dup 1 swap list_fetch 3 = "Second element should be 3" assert
    dup 0 swap list_fetch 1 = "First element should be 1" assert

    dup list_pop  7 = "Popping should give 7" assert
    dup list_pop  3 = "Popping should give 3" assert
    dup list_peek 3 = "Peeking should give 3" assert
    dup list_peek 3 = "Peeking should still give 3" assert
    dup list_pop  drop
    dup list_pop  drop
    dup list_peek drop  # Should raise
    free
    0
