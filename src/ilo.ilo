import lib.std
import lib.ilo.generator
import lib.ilo.lexer
import lib.ilo.parser


def main: ptr argv, int argc -> int
    # Debug flags
    True  VERIFY_MEMORY setb
    False DUMP_MEMORY   setb

    argc 2 != if
        "Usage: "           puts
        argv 0 get_argument puts
        " FILENAME\n"       puts
        1 exit

    argv 1 get_argument
    dup read_file
    tokenize
    parse
    generate_code_x86_64_linux
    puts

    0
